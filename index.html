<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·šä¸Šå¡”ç¾…å åœ (ç”Ÿæ´»åŒ–è§£è®€ç‰ˆ)</title>
    <style>
        :root {
            --bg-color: #1a0b2e;
            --card-back: #2d1b4e;
            --accent: #d4af37; /* Gold */
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
            --card-width: 120px;
            --card-height: 200px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-image: radial-gradient(circle at 50% 10%, #2d1b4e 0%, #1a0b2e 80%);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 { color: var(--accent); margin-bottom: 10px; letter-spacing: 2px; }
        .subtitle { color: var(--text-muted); font-size: 0.9rem; }

        /* Controls Section */
        .controls {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 800px;
            margin-bottom: 30px;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: var(--accent); font-size: 0.9rem; }
        
        input[type="text"], select, textarea {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #444;
            background: #0f0518;
            color: #fff;
            font-size: 1rem;
        }

        .radio-group { display: flex; gap: 15px; flex-wrap: wrap; }
        .radio-group label { cursor: pointer; color: var(--text-main); display: flex; align-items: center; }
        .radio-group input { margin-right: 5px; }

        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-draw { background-color: var(--accent); color: #1a0b2e; }
        .btn-draw:hover { background-color: #f3cf55; box-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }
        .btn-reset { background-color: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); }
        .btn-reset:hover { border-color: var(--text-main); color: var(--text-main); }

        /* Board Area */
        .board {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 40px;
            min-height: 220px;
            width: 100%;
            max-width: 900px;
        }

        /* Card Styling & Animation */
        .card-container {
            width: var(--card-width);
            height: var(--card-height);
            perspective: 1000px;
            cursor: pointer;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn { to { opacity: 1; } }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }

        .card-container.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #444;
        }

        .card-back {
            background-color: var(--card-back);
            background-image: repeating-linear-gradient(45deg, #2d1b4e 0, #2d1b4e 10px, #36205e 10px, #36205e 20px);
            color: rgba(255,255,255,0.1);
            font-size: 2rem;
        }

        .card-front {
            background-color: #eaddcf; /* Parchment color */
            color: #1a0b2e;
            transform: rotateY(180deg);
            padding: 10px;
            border: 2px solid var(--accent);
        }

        /* Upside down content for reversed cards */
        .card-container[data-orientation="reversed"] .card-front .card-content {
            transform: rotate(180deg);
        }

        .card-title { font-weight: bold; font-size: 1rem; margin-bottom: 5px; }
        .card-status { font-size: 0.8rem; color: #555; margin-bottom: 10px; font-style: italic;}
        .card-img-placeholder {
            width: 60px;
            height: 90px;
            background: #ccc;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #555;
            border: 1px solid #999;
        }
        
        .position-label {
            text-align: center;
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Interpretation Section */
        .results {
            width: 100%;
            max-width: 800px;
            display: none; /* Hidden by default */
        }

        .reading-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent);
            animation: slideUp 0.5s ease-out forwards;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .reading-header {
            font-size: 1.1rem;
            color: var(--accent);
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }

        .reading-text {
            line-height: 1.6;
            font-size: 1rem;
            color: #ddd;
        }

        .keyword-toggle {
            margin-top: 10px;
            font-size: 0.8rem;
            color: var(--text-muted);
            cursor: pointer;
            text-decoration: underline;
        }
        
        .keywords-box {
            display: none;
            margin-top: 8px;
            font-size: 0.85rem;
            color: #aaa;
            background: rgba(0,0,0,0.2);
            padding: 5px;
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .board { flex-direction: column; align-items: center; min-height: auto; }
            .card-container { margin-bottom: 20px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ”® ç”Ÿæ´»åŒ–å¡”ç¾…æŒ‡å¼•</h1>
        <div class="subtitle">ç”¨æœ€æ—¥å¸¸çš„èªè¨€ï¼Œç‚ºä½ è§£é–‹å¿ƒä¸­çš„ç–‘æƒ‘</div>
    </header>

    <div class="controls">
        <div class="input-group">
            <label>ä½ æƒ³å•çš„å•é¡Œ</label>
            <input type="text" id="questionInput" placeholder="ä¾‹å¦‚ï¼šæœ€è¿‘é‚£å€‹æ›–æ˜§å°è±¡å°æˆ‘æœ‰æ„æ€å—ï¼Ÿ">
        </div>

        <div class="input-group">
            <label>å•é¡Œé¡å‹</label>
            <select id="topicSelect">
                <option value="general">ç¶œåˆé‹å‹¢</option>
                <option value="love">æ„›æƒ… / æ„Ÿæƒ…</option>
                <option value="career">å·¥ä½œ / äº‹æ¥­</option>
                <option value="money">é‡‘éŒ¢ / è²¡é‹</option>
                <option value="study">å­¸æ¥­ / è€ƒè©¦</option>
                <option value="relation">äººéš› / å®¶åº­</option>
                <option value="growth">è‡ªæˆ‘æˆé•· / å¿ƒéˆ</option>
            </select>
        </div>

        <div class="input-group">
            <label>é¸æ“‡ç‰Œé™£</label>
            <div class="radio-group">
                <label><input type="radio" name="spread" value="single" checked> å–®å¼µæŒ‡å¼• (å»ºè­°)</label>
                <label><input type="radio" name="spread" value="time"> æ™‚é–“ä¹‹æµ (éå»/ç¾åœ¨/æœªä¾†)</label>
                <label><input type="radio" name="spread" value="soa"> ç¾æ³åˆ†æ (ç¾æ³/éšœç¤™/å»ºè­°)</label>
            </div>
        </div>

        <div class="btn-group">
            <button class="btn-draw" id="drawBtn">æ´—ç‰Œä¸¦æŠ½ç‰Œ</button>
            <button class="btn-reset" id="resetBtn">é‡æ–°å åœ</button>
        </div>
    </div>

    <div id="board" class="board">
        </div>

    <div id="results" class="results">
        </div>

    <script>
        /**
         * 1. Tarot Deck Data Construction
         */
        
        // Helper to create card objects
        // Tag ç”¨æ–¼ç”Ÿæˆå»ºè­°ï¼š'new'(æ–°é–‹å§‹/å†’éšª), 'action'(è¡Œå‹•/ç†±æƒ…), 'wait'(è§€å¯Ÿ/ä¼‘æ¯/åœæ»¯), 'stable'(ç©©å®š/å®ˆæˆ), 'conflict'(è¡çª/æŒ‘æˆ°), 'social'(äººéš›/åˆä½œ), 'caution'(å°å¿ƒ/é¢¨éšª)
        const createCard = (id, name, suit, number, tag, upSum, revSum) => ({
            id, name, suit, number, tag, uprightSummary: upSum, reversedSummary: revSum, arcana: suit ? 'minor' : 'major'
        });

        // Major Arcana Data (ç”Ÿæ´»åŒ–ç‰ˆ + Tags)
        const MAJORS = [
            createCard("maj_0", "æ„šäºº", null, 0, "new",
                "å°±åƒæ²’åšæ”»ç•¥å°±èƒŒä¸ŠèƒŒåŒ…å»æ—…è¡Œï¼Œé›–ç„¶ä¸çŸ¥é“ä¸‹ä¸€ç«™åœ¨å“ªï¼Œä½†å¿ƒæƒ…é›€èºï¼Œå°ä¸–ç•Œå……æ»¿å¥½å¥‡ã€‚é€™æš—ç¤ºè‘—ä¸€å€‹å¤§è†½çš„æ–°é–‹å§‹ï¼Œåˆ¥æƒ³å¤ªå¤šï¼Œè¡å°±å°äº†ã€‚", 
                "å°±åƒå‡ºé–€æ—…è¡Œå»å¿˜äº†å¸¶éŒ¢åŒ…ï¼Œé›–ç„¶æœ‰å‹‡æ°£ä½†ç¼ºä¹æº–å‚™ã€‚é€™æé†’ä½ å¯èƒ½æœ‰é»å¤ªéå¤©çœŸæˆ–è¡å‹•ï¼Œå°å¿ƒå› ç‚ºæ²’çœ‹æ¸…ç¾å¯¦è€Œæ‘”è·¤ã€‚"),
            
            createCard("maj_1", "é­”è¡“å¸«", null, 1, "action", 
                "å°±åƒå¤§å»šæ‰“é–‹å†°ç®±ï¼Œç™¼ç¾å‰›å¥½å…·å‚™æ‰€æœ‰éœ€è¦çš„é£Ÿæï¼Œå¯ä»¥éš¨æ‰‹è®Šå‡ºä¸€é“å¥½èœã€‚ç¾åœ¨æ˜¯ä½ å±•ç¾å¯¦åŠ›çš„æ™‚å€™ï¼Œä½ çš„èƒ½åŠ›èˆ‡è³‡æºéƒ½æº–å‚™å¥½äº†ã€‚", 
                "å°±åƒæƒ³è®Šé­”è¡“å»éœ²äº†é¤¡ï¼Œæˆ–æ˜¯æ‰‹ä¸Šé›–ç„¶æœ‰å·¥å…·å»ä¸çŸ¥é“æ€éº¼ç”¨ã€‚é€™æš—ç¤ºä½ å¯èƒ½é‚„æ¬ ç¼ºä¸€é»ç«å€™ï¼Œæˆ–æ˜¯å¤ªéä¾è³´å°è°æ˜ï¼Œçµæœåè€Œå¼„å·§æˆæ‹™ã€‚"),
            
            createCard("maj_2", "å¥³ç¥­å¸", null, 2, "wait", 
                "å°±åƒåœ¨å®‰éœçš„æ·±å¤œè£¡è®€ä¸€æœ¬æ›¸ï¼Œå¤–è¡¨å¹³éœä½†å…§å¿ƒé‹ä½œè±å¯Œã€‚é€™æ™‚å€™ä¸è¦æ€¥è‘—å°å¤–åš·åš·ï¼Œéœä¸‹ä¾†è½è½ä½ å¿ƒè£¡çš„è²éŸ³ï¼ˆç›´è¦ºï¼‰ï¼Œå®ƒæ¯”å¤§è…¦åˆ†æå¾—æ›´æº–ã€‚", 
                "å°±åƒå› ç‚ºæƒ³å¤ªå¤šè€Œç¡ä¸è‘—è¦ºï¼ŒæŠŠåˆ¥äººçš„ç„¡å¿ƒä¹‹éè§£è®€æˆé‡å°ä½ ã€‚é€™æš—ç¤ºä½ æœ€è¿‘å¯èƒ½æœ‰é»ç¥ç¶“è³ªï¼Œæˆ–æ˜¯æŠŠè‡ªå·±å°é–‰èµ·ä¾†ï¼Œæ‹’çµ•èˆ‡äººæºé€šã€‚"),
            
            createCard("maj_3", "å¥³çš‡", null, 3, "social", 
                "å°±åƒé€±æœ«èººåœ¨èˆ’é©çš„æ²™ç™¼ä¸Šåƒè‘—é«˜ç´šç”œé»ï¼Œæ„Ÿåˆ°ç„¡æ¯”å¯Œè¶³èˆ‡æ…µæ‡¶ã€‚é€™æ˜¯æ”¶ç©«èˆ‡äº«å—çš„æ™‚åˆ»ï¼Œç„¡è«–æ˜¯æ‡·å­•ã€ç¨®èŠ±é‚„æ˜¯å­˜éŒ¢ï¼Œéƒ½æœƒæœ‰è±ç››çš„æˆæœã€‚", 
                "å°±åƒç‚ºäº†å¡«è£œç©ºè™›è€Œç˜‹ç‹‚ç¶²è³¼ï¼Œæˆ–æ˜¯å°ä¼´ä¾¶éåº¦ä¾è³´ã€æƒ…ç·’å‹’ç´¢ã€‚é€™æé†’ä½ ä¸è¦è®“ç‰©è³ªæ…¾æœ›æˆ–ä¸å®‰å…¨æ„Ÿæ§åˆ¶äº†ä½ çš„ç”Ÿæ´»ã€‚"),
            
            createCard("maj_4", "çš‡å¸", null, 4, "stable", 
                "å°±åƒä¸€ä½åš´æ ¼ä½†å¯é çš„å…¬å¸ä¸»ç®¡ï¼Œåˆ¶å®šäº†æ˜ç¢ºçš„è¦å‰‡è®“å¤§å®¶éµå®ˆã€‚ç¾åœ¨éœ€è¦çš„æ˜¯é‚è¼¯ã€ç´€å¾‹å’Œè¡Œå‹•åŠ›ï¼Œæ”¶èµ·æƒ…ç·’ï¼Œç”¨ç†æ™ºä¾†è§£æ±ºå•é¡Œã€‚", 
                "å°±åƒä¸€å€‹åªæœƒç™¼è™Ÿæ–½ä»¤ä½†æ²’äººè½çš„è€é—†ï¼Œæˆ–æ˜¯ä½ è‡ªå·±å¤ªéå›ºåŸ·ï¼Œè½ä¸é€²åˆ¥äººçš„å»ºè­°ã€‚é€™æš—ç¤ºå±€å‹¢å¯èƒ½æœ‰é»å¤±æ§ï¼Œæˆ–è€…ä½ å¤ªéå¼·å‹¢è®“äººåæ„Ÿã€‚"),
            
            createCard("maj_5", "æ•™çš‡", null, 5, "stable", 
                "å°±åƒå»å­¸æ ¡ä¸Šèª²æˆ–æ˜¯å»å»Ÿè£¡æ‹œæ‹œæ±‚ç±¤ï¼Œé€éæ­£è¦çš„ç®¡é“æˆ–é•·è¼©çš„å»ºè­°ä¾†è§£æ±ºå•é¡Œã€‚é€™æ™‚å€™ä¸é©åˆæ¨™æ–°ç«‹ç•°ï¼Œè·Ÿè‘—æœ‰ç¶“é©—çš„äººèµ°æœ€å®‰å…¨ã€‚", 
                "å°±åƒå—å¤ äº†å­¸æ ¡çš„æ­»æ¿è¦å®šæƒ³è¦ç¿¹èª²ï¼Œæˆ–æ˜¯ç™¼ç¾æ‰€è¬‚çš„æ¬Šå¨äººå£«å…¶å¯¦åœ¨èªªè¬Šã€‚é€™æš—ç¤ºä½ æƒ³è¦æŒ‘æˆ°å‚³çµ±ï¼Œæˆ–æ˜¯ç¾æœ‰çš„é«”åˆ¶è®“ä½ æ„Ÿåˆ°çª’æ¯ã€‚"),
            
            createCard("maj_6", "æˆ€äºº", null, 6, "social", 
                "å°±åƒç†±æˆ€ä¸­çš„æƒ…ä¾¶çœ¼è£¡åªæœ‰å°æ–¹ï¼Œæˆ–è€…é‡åˆ°äº†ä¸€å€‹è·Ÿä½ ä¸€æ‹å³åˆçš„åˆä½œå¤¥ä¼´ã€‚é€™å¼µç‰Œå¼·èª¿çš„æ˜¯ã€Œé¸æ“‡ã€ï¼Œè«‹é¸æ“‡é‚£å€‹è®“ä½ å¿ƒå‹•ä¸”åƒ¹å€¼è§€ç›¸ç¬¦çš„æ–¹å‘ã€‚", 
                "å°±åƒåœ¨å…©å€‹å–œæ­¡çš„å°è±¡ï¼ˆæˆ–å·¥ä½œï¼‰ä¹‹é–“çŒ¶è±«ä¸æ±ºï¼Œçµæœå¯èƒ½å…©å€‹éƒ½è½ç©ºã€‚é€™ä¹Ÿæš—ç¤ºè‘—é—œä¿‚ä¸­çš„æºé€šä¸è‰¯ï¼Œæˆ–æ˜¯åšå‡ºäº†é•èƒŒæœ¬å¿ƒçš„é¸æ“‡ã€‚"),
            
            createCard("maj_7", "æˆ°è»Š", null, 7, "action", 
                "å°±åƒé§•é§›è‘—ä¸€å°è·‘è»Šåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå¥”é¦³ï¼Œé›–ç„¶è·¯æ³å¯èƒ½å¾ˆé¡›ç°¸ï¼Œä½†ä½ é›™æ‰‹ç·Šæ¡æ–¹å‘ç›¤ï¼Œé è‘—æ„å¿—åŠ›ç¡¬æ˜¯è¡éå»ã€‚é€™æ˜¯å‹åˆ©çš„å‰å…†ï¼Œå …æŒä½ï¼", 
                "å°±åƒé–‹è»Šæ™‚æƒ…ç·’å¤±æ§äº‚è¸©æ²¹é–€ï¼Œçµæœè¿·è·¯æˆ–ç™¼ç”Ÿæ“¦æ’ã€‚é€™æš—ç¤ºä½ å¯èƒ½è¢«æƒ…ç·’æ²–æ˜é ­ï¼Œæˆ–æ˜¯æ–¹å‘éŒ¯èª¤é‚„ç¡¬è¦è¡ï¼Œå»ºè­°å…ˆè¸©ç…è»Šå†·éœä¸€ä¸‹ã€‚"),
            
            createCard("maj_8", "åŠ›é‡", null, 8, "wait", 
                "å°±åƒç¾å¥³èˆ‡é‡ç¸çš„æ•…äº‹ï¼Œä¸æ˜¯ç”¨é­å­é¦´æœç…å­ï¼Œè€Œæ˜¯ç”¨æº«æŸ”çš„æ’«æ‘¸è®“ç‰ å®‰éœã€‚çœŸæ­£çš„å¼·å¤§ä¸æ˜¯å¤§è²å¼å«ï¼Œè€Œæ˜¯é¢å°å›°é›£æ™‚ä¾ç„¶ä¿æŒå„ªé›…èˆ‡è€å¿ƒã€‚", 
                "å°±åƒé‡åˆ°å›°é›£å°±æƒ³é€ƒé¿ï¼Œæˆ–æ˜¯å› ç‚ºææ‡¼è€Œè®Šå¾—å…·æ”»æ“Šæ€§ã€‚é€™æš—ç¤ºä½ å°è‡ªå·±å¤±å»äº†ä¿¡å¿ƒï¼Œå¿˜äº†å…¶å¯¦ä½ æœ‰èƒ½åŠ›è™•ç†é€™ä¸€åˆ‡ï¼Œåˆ¥è¢«å¿ƒè£¡çš„é‡ç¸åš‡åˆ°äº†ã€‚"),
            
            createCard("maj_9", "éš±è€…", null, 9, "wait", 
                "å°±åƒä¸€å€‹äººé—œæ‰æ‰‹æ©Ÿï¼Œèº²é€²æ·±å±±è£¡é–‰é—œä¿®ç·´ã€‚é€™æ®µæ™‚é–“ä½ ä¸éœ€è¦ç¤¾äº¤ï¼Œä½ éœ€è¦çš„æ˜¯å®‰éœåœ°å•è‡ªå·±ã€Œæˆ‘è¦ä»€éº¼ï¼Ÿã€ã€‚ç­”æ¡ˆä¸åœ¨å¤–é¢ï¼Œåœ¨ä½ å¿ƒè£¡ã€‚", 
                "å°±åƒå› ç‚ºå®³æ€•å—å‚·è€ŒæŠŠè‡ªå·±é—œåœ¨æˆ¿é–“è£¡ä¸è¦‹äººï¼Œè®Šæˆäº†ä¸€ç¨®é€ƒé¿ã€‚é€™æé†’ä½ ï¼Œç¨è™•æ˜¯ç‚ºäº†å……é›»ï¼Œè€Œä¸æ˜¯ç‚ºäº†åˆ‡æ–·èˆ‡ä¸–ç•Œçš„é€£çµï¼Œåˆ¥é‘½ç‰›è§’å°–äº†ã€‚"),
            
            createCard("maj_10", "å‘½é‹ä¹‹è¼ª", null, 10, "new", 
                "å°±åƒåœ¨è³­å ´æ‹‰éœ¸æ©Ÿæ‹‰åˆ°äº†777ï¼Œæˆ–æ˜¯çªç„¶æ¥åˆ°ä¸€å€‹æ„å¤–çš„å·¥ä½œé‚€ç´„ã€‚å‘½é‹çš„è¼ªç›¤è½‰å‹•äº†ï¼Œå¥½çš„æ©Ÿæœƒå³å°‡ä¸Šé–€ï¼Œä½ è¦åšçš„å°±æ˜¯é †è‘—é€™è‚¡æµå‹•å‰é€²ã€‚", 
                "å°±åƒé‡åˆ°æ°´é€†ï¼Œè«¸äº‹ä¸é †ï¼Œè¦ºå¾—å…¨ä¸–ç•Œéƒ½åœ¨è·Ÿä½ ä½œå°ã€‚é€™å…¶å¯¦æ˜¯å‘½é‹åœ¨æé†’ä½ ã€Œæš«åœä¸€ä¸‹ã€ï¼Œä¸è¦ç¡¬å»æŠµæŠ—æ”¹è®Šï¼Œä½æ½®éå¾Œå°±æ˜¯é«˜æ½®ã€‚"),
            
            createCard("maj_11", "æ­£ç¾©", null, 11, "stable", 
                "å°±åƒåœ¨æ³•é™¢ä¸Šæ³•å®˜æ•²ä¸‹æ§Œå­ï¼Œç¨®ä»€éº¼å› å¾—ä»€éº¼æœã€‚é€™æ˜¯ä¸€å¼µè¬›æ±‚é‚è¼¯èˆ‡å¥‘ç´„çš„ç‰Œï¼Œå¦‚æœä½ éå»åŠªåŠ›ï¼Œç¾åœ¨æœƒå¾—åˆ°å›å ±ï¼›å¦‚æœä½ æ›¾å·æ‡¶ï¼Œç¾åœ¨å¾—ä»˜å‡ºä»£åƒ¹ã€‚", 
                "å°±åƒè¢«èª¤æœƒå»æœ‰ç†èªªä¸æ¸…ï¼Œæˆ–æ˜¯é­é‡åˆ°ä¸å…¬å¹³çš„å°å¾…ã€‚é€™ä¹Ÿå¯èƒ½æš—ç¤ºä½ è‡ªå·±å› ç‚ºå¸¶æœ‰åè¦‹ï¼Œè€Œåšå‡ºäº†éŒ¯èª¤çš„åˆ¤æ–·ï¼Œå°å¿ƒä¸è¦åå¿ƒå–”ã€‚"),
            
            createCard("maj_12", "å€’åŠäºº", null, 12, "wait", 
                "å°±åƒæŠŠè‡ªå·±å€’æ›åœ¨æ¨¹ä¸Šï¼Œé›–ç„¶èº«é«”ä¸èƒ½å‹•ï¼Œä½†çœ‹ä¸–ç•Œçš„è§’åº¦å®Œå…¨ä¸ä¸€æ¨£äº†ã€‚ç¾åœ¨äº‹æƒ…å¡ä½äº†æ²’é—œä¿‚ï¼Œèˆ‡å…¶ç¡¬è¡ï¼Œä¸å¦‚å…ˆæš«åœï¼Œæ›å€‹è…¦è¢‹æ€è€ƒã€‚", 
                "å°±åƒä½ æ˜¯ç‚ºäº†åˆ¥äººå¥½ï¼Œä½†åˆ¥äººæ ¹æœ¬ä¸é ˜æƒ…ï¼Œè®“ä½ è¦ºå¾—è‡ªå·±å¾ˆå§”å±ˆã€‚é€™æ˜¯ä¸€ç¨®ç„¡è¬‚çš„çŠ§ç‰²ï¼Œå»ºè­°ä½ è¶•å¿«æŠŠè‡ªå·±æ”¾ä¸‹ä¾†ï¼Œåˆ¥å†ç•¶å—æ°£åŒ…äº†ã€‚"),
            
            createCard("maj_13", "æ­»ç¥", null, 13, "caution", 
                "å°±åƒæ‰‹æ©Ÿæ‘”å¾—ç²‰ç¢å®Œå…¨ä¿®ä¸å¥½ï¼Œé›–ç„¶é›£éï¼Œä½†é€™è¿«ä½¿ä½ çµ‚æ–¼å»è²·äº†é‚£æ”¯æƒ³è¦å¾ˆä¹…çš„æ–°æ‰‹æ©Ÿã€‚èˆŠçš„ä¸å»æ–°çš„ä¸ä¾†ï¼Œè©²æ”¾æ‰‹çš„å°±è®“å®ƒèµ°å§ã€‚", 
                "å°±åƒæ˜æ˜é€™æ®µé—œä¿‚å·²ç¶“çˆ›é€äº†ï¼Œä½ å»å› ç‚ºæ€•å­¤å–®è€Œæ­»æŠ“è‘—ä¸æ”¾ã€‚æŠ—æ‹’æ”¹è®Šåªæœƒå»¶é•·ç—›è‹¦ï¼Œæ‰¿èªã€Œå®ƒå·²ç¶“çµæŸäº†ã€æ˜¯ä½ ç¾åœ¨æœ€éœ€è¦çš„å‹‡æ°£ã€‚"),
            
            createCard("maj_14", "ç¯€åˆ¶", null, 14, "stable", 
                "å°±åƒèª¿é…’å¸«åœ¨æ··åˆå…©ç¨®ä¸åŒçš„é£²æ–™ï¼Œè©¦åœ–èª¿å‡ºæœ€å®Œç¾çš„å£æ„Ÿã€‚ä½ ç¾åœ¨éœ€è¦ç•¶é‚£å€‹ã€Œä¸­é–“äººã€ï¼Œåœ¨å·¥ä½œèˆ‡ç”Ÿæ´»ã€æ„Ÿæ€§èˆ‡ç†æ€§ä¹‹é–“æ‰¾åˆ°å¹³è¡¡é»ã€‚", 
                "å°±åƒæŠŠå…©ç¨®ä¸ç›¸å®¹çš„æ¶²é«”ç¡¬å€’åœ¨ä¸€èµ·ï¼Œçµæœç™¼ç”Ÿçˆ†ç‚¸ã€‚é€™æš—ç¤ºä½ æœ€è¿‘ç”Ÿæ´»å¤±è¡¡äº†ï¼Œå¯èƒ½éåº¦æŠ•å…¥æŸä»¶äº‹è€Œå¿½ç•¥äº†å…¶ä»–ï¼Œæˆ–è€…ç¼ºä¹è€å¿ƒå°è‡´æºé€šç ´å±€ã€‚"),
            
            createCard("maj_15", "é«˜å¡”", null, 15, "caution", 
                "å°±åƒè“‹å¾—å¥½å¥½çš„ç©æœ¨åŸå ¡çªç„¶è¢«æ¨å€’ï¼Œé›–ç„¶åš‡äººï¼Œä½†ä¹Ÿè®“ä½ çœ‹æ¸…åŸæœ¬çš„åœ°åŸºæ ¹æœ¬ä¸ç©©ã€‚é€™æ˜¯ä¸€å€‹åŠ‡çƒˆçš„æ”¹è®Šï¼Œé›–ç„¶ç—›ï¼Œä½†èƒ½è®“ä½ å¾¹åº•è¦ºé†’ã€‚", 
                "å°±åƒç™¼ç¾æˆ¿å­æœ‰è£‚ç¸«å»åªç”¨å£ç´™è²¼èµ·ä¾†å‡è£æ²’äº‹ã€‚é›–ç„¶æš«æ™‚æ²’å€’ï¼Œä½†å¿ƒè£¡ç¸½æ˜¯æå¿ƒåŠè†½ã€‚é€™æš—ç¤ºä½ æ­£åœ¨é€ƒé¿ä¸€å€‹å³å°‡çˆ†ç™¼çš„å•é¡Œã€‚"),
            
            createCard("maj_16", "æ˜Ÿæ˜Ÿ", null, 16, "new", 
                "å°±åƒåœ¨æ¼†é»‘çš„æ²™æ¼ ä¸­çœ‹åˆ°äº†æ»¿å¤©æ˜Ÿæ–—ï¼Œé›–ç„¶é‚„æ²’å¤©äº®ï¼Œä½†ä½ çŸ¥é“æ–¹å‘åœ¨å“ªè£¡ã€‚é€™æ˜¯ä¸€æ®µç™‚ç™’èº«å¿ƒçš„æ™‚å…‰ï¼Œç›¸ä¿¡ä½ çš„é¡˜æœ›ï¼Œå®‡å®™æ­£åœ¨å¹«ä½ ã€‚", 
                "å°±åƒåŸæœ¬æœŸå¾…å¾ˆä¹…çš„æµæ˜Ÿé›¨å»å› ç‚ºçƒé›²è€Œæ²’çœ‹åˆ°ã€‚é€™æš—ç¤ºä½ å°æŸä»¶äº‹æœŸå¾…éé«˜è€Œæ„Ÿåˆ°å¤±è½ï¼Œæˆ–æ˜¯å°è‡ªå·±ç¼ºä¹ä¿¡å¿ƒï¼Œè¦ºå¾—å¤¢æƒ³é™ä¸å¯åŠã€‚"),
            
            createCard("maj_17", "æœˆäº®", null, 17, "caution", 
                "å°±åƒåœ¨èµ·å¤§éœ§çš„åŠå¤œé–‹è»Šï¼Œçœ‹ä¸æ¸…å‰é¢çš„è·¯ï¼Œè·¯é‚Šçš„å½±å­çœ‹èµ·ä¾†éƒ½åƒé¬¼ã€‚ä½ ç¾åœ¨æ„Ÿåˆ°ä¸å®‰ã€æ‡·ç–‘ï¼Œç”šè‡³è¢«ææ‡¼ç¶æ¶ï¼Œä½†å…¶å¯¦å¾ˆå¤šéƒ½æ˜¯ä½ è‡ªå·±åš‡è‡ªå·±ã€‚", 
                "å°±åƒæ—©æ™¨çš„é™½å…‰é©…æ•£äº†è¿·éœ§ï¼Œä½ ç™¼ç¾æ˜¨æ™šåš‡ä½ çš„ã€Œé¬¼ã€å…¶å¯¦åªæ˜¯ä»¶è¡£æœã€‚éš±è—çš„ç§˜å¯†æˆ–è¬Šè¨€è¢«æ­ç©¿ï¼Œé›–ç„¶æ®˜é…·ï¼Œä½†ä½ çµ‚æ–¼ä¸ç”¨å†çŒœç–‘äº†ã€‚"),
            
            createCard("maj_18", "å¤ªé™½", null, 18, "social", 
                "å°±åƒå¤å¤©åœ¨æµ·é‚Šå¥”è·‘ï¼Œé™½å…‰ç‡¦çˆ›ï¼Œå¿ƒæƒ…å¥½åˆ°æƒ³å”±æ­Œã€‚é€™æ˜¯å¡”ç¾…ç‰Œè£¡æœ€å¥½çš„ç‰Œä¹‹ä¸€ï¼Œè±¡å¾µæˆåŠŸã€æ´»åŠ›èˆ‡ç´”ç²¹çš„å¿«æ¨‚ï¼Œç›¡æƒ…äº«å—ç•¶ä¸‹å§ï¼", 
                "å°±åƒé›–ç„¶æ˜¯å¤§æ™´å¤©ä½†ä½ å¿˜äº†å¸¶å¤ªé™½çœ¼é¡ï¼Œæœ‰é»åˆºçœ¼ã€‚é€™ä»£è¡¨é›–ç„¶æ•´é«”é‹å‹¢ä¸éŒ¯ï¼Œä½†å¯èƒ½æœ‰ä¸€äº›å°çƒé›²ï¼ˆæ¯”å¦‚éåº¦æ¨‚è§€å¿½ç•¥ç´°ç¯€ï¼‰ï¼Œç¨å¾®æ³¨æ„ä¸€ä¸‹å°±å¥½ã€‚"),
            
            createCard("maj_19", "å¯©åˆ¤", null, 19, "new", 
                "å°±åƒæœŸæœ«è€ƒæ”¾æ¦œçš„é‚£ä¸€åˆ»ï¼Œéå»ä¸€å­¸æœŸæœ‰æ²’æœ‰åŠªåŠ›ï¼Œç¾åœ¨ä¸€ç¿»å…©çªçœ¼ã€‚é€™æ˜¯äººç”Ÿçš„åå­—è·¯å£ï¼Œè½åˆ°å…§å¿ƒçš„å¬å–šï¼Œåšå‡ºé‚£å€‹æ—©å°±è©²åšçš„æ±ºå®šå§ã€‚", 
                "å°±åƒæ˜æ˜çŸ¥é“è©²æ¸›è‚¥äº†ï¼Œå»é‚„æ˜¯å‡è£è½ä¸åˆ°é«”é‡è¨ˆçš„è­¦å‘Šã€‚é€™æš—ç¤ºä½ æ­£åœ¨é€ƒé¿ä¸€å€‹é‡è¦çš„æ±ºå®šï¼Œæˆ–æ˜¯å°éå»çš„éŒ¯èª¤æ„Ÿåˆ°å¾Œæ‚”å»ä¸é¡˜æ”¹è®Šã€‚"),
            
            createCard("maj_20", "ä¸–ç•Œ", null, 20, "stable", 
                "å°±åƒæ‹¼åœ–æ‹¼ä¸Šäº†æœ€å¾Œä¸€å¡Šï¼Œæˆ–è€…ç’°éŠä¸–ç•Œä¸€åœˆå›åˆ°äº†å®¶ã€‚é€™æ˜¯ä¸€å€‹å¾ªç’°çš„åœ“æ»¿çµæŸï¼Œä½ å®Œæˆäº†ç›®æ¨™ï¼Œå¯ä»¥å¥½å¥½æ…¶ç¥ä¸¦æº–å‚™é€²å…¥ä¸‹ä¸€å€‹éšæ®µäº†ã€‚", 
                "å°±åƒè·‘é¦¬æ‹‰æ¾åœ¨çµ‚é»ç·šå‰è·Œå€’ï¼Œæˆ–æ˜¯æ‹¼åœ–å°‘äº†ä¸€å¡Šå¼„ä¸Ÿäº†ã€‚é›–ç„¶é›¢æˆåŠŸå¾ˆè¿‘ï¼Œä½†ç¸½è¦ºå¾—å¿ƒè£¡æœ‰é»ç©ºè™›ï¼Œæˆ–è€…å› ç‚ºæŸäº›å°é˜»ç¤™è€Œç„¡æ³•å®Œç¾æ”¶å°¾ã€‚")
        ];

        // Generator for Minor Arcana (ç”Ÿæ´»åŒ–ç‰ˆ)
        const getMinorMeaning = (suitKey, number) => {
            const suits = {
                wands: { name: "æ¬Šæ–", element: "ç« (è¡Œå‹•/ç†±æƒ…)", verb: "è¡Œå‹•", area: "å·¥ä½œæˆ–èˆˆè¶£" },
                cups: { name: "è–æ¯", element: "æ°´ (æƒ…æ„Ÿ/äººéš›)", verb: "æ„Ÿå—", area: "æ„Ÿæƒ…æˆ–äººéš›" },
                swords: { name: "å¯¶åŠ", element: "é¢¨ (æ€è€ƒ/å‚·å®³)", verb: "æ€è€ƒ", area: "æƒ³æ³•æˆ–æºé€š" },
                coins: { name: "æ˜Ÿå¹£", element: "åœŸ (ç‰©è³ª/é‡‘éŒ¢)", verb: "æ“æœ‰", area: "é‡‘éŒ¢æˆ–ç¾å¯¦" }
            };

            const s = suits[suitKey];

            // Specific Scenario Generator based on Number + Suit
            const uprightScenarios = {
                1: { // Ace
                    wands: "å°±åƒçªç„¶éˆå…‰ä¸€é–ƒï¼Œæƒ³é–‹ä¸€å€‹æ–°é »é“æˆ–å­¸æ–°æ‰è—ï¼Œç†±è¡€æ²¸é¨°ï¼",
                    cups: "å°±åƒå‰›èªè­˜ä¸€å€‹æ–°æœ‹å‹æˆ–å°è±¡ï¼Œå¿ƒè£¡æ³›èµ·ä¸€é™£æ¼£æ¼ªï¼Œæ„Ÿè¦ºå°äº†ã€‚",
                    swords: "å°±åƒæƒ³å‡ºäº†ä¸€å€‹çµ•å¦™çš„é»å­ï¼Œæˆ–æ˜¯åšäº†ä¸€å€‹æœæ–·çš„æ–°æ±ºå®šã€‚",
                    coins: "å°±åƒå¤©ä¸Šæ‰ä¸‹ä¾†ä¸€å€‹è³ºéŒ¢çš„å¥½æ©Ÿæœƒï¼Œæˆ–æ˜¯æ‹¿åˆ°äº†ä¸€ç­†æ–°è³‡é‡‘ã€‚"
                },
                2: { // Balance/Choice
                    wands: "å°±åƒæ‹¿è‘—åœ°åœ–åœ¨è¦åŠƒä¸‹ä¸€æ­¥ï¼Œé›–ç„¶é‚„æ²’å‡ºç™¼ï¼Œä½†çœ¼å…‰æ”¾å¾—å¾ˆé ã€‚",
                    cups: "å°±åƒå’Œå–œæ­¡çš„äººä¹¾æ¯ï¼Œå½¼æ­¤å¿ƒæ„ç›¸é€šï¼Œé—œä¿‚å’Œè«§åˆç”œèœœã€‚",
                    swords: "å°±åƒè¢«è’™è‘—çœ¼ç›è¦ä½ é¸å·¦å³é‚Šï¼Œå› ç‚ºä¸æƒ³é¢å°ç¾å¯¦è€Œåƒµåœ¨é‚£è£¡ã€‚",
                    coins: "å°±åƒåƒé›œè€è—äººä¸€æ¨£åŒæ™‚ç©å…©é¡†çƒï¼ŒåŠªåŠ›åœ¨æ”¶æ”¯æˆ–å…©ä»½å·¥ä½œä¸­ä¿æŒå¹³è¡¡ã€‚"
                },
                3: { // Growth/Group
                    wands: "å°±åƒä½ çš„è¨ˆç•«åˆæ­¥æˆåŠŸäº†ï¼Œç«™åœ¨é«˜è™•çœ‹è‘—èˆ¹å…¥æ¸¯ï¼ŒæœŸå¾…æ›´å¤šã€‚",
                    cups: "å°±åƒé€±äº”æ™šä¸Šè·Ÿé–¨èœœå¥½å‹å»èšé¤å–é…’ï¼Œæ°£æ°›è¶…å—¨ï¼Œå¤§å®¶éƒ½å¾ˆé–‹å¿ƒã€‚",
                    swords: "å°±åƒå¿ƒè¢«ç‹ ç‹ åˆºäº†ä¸€ä¸‹ï¼Œå¯èƒ½æ˜¯è½åˆ°å£æ¶ˆæ¯æˆ–å¤±æˆ€ï¼ŒçœŸçš„å¾ˆç—›ã€‚",
                    coins: "å°±åƒè·Ÿå°ˆæ¥­äººå£«ä¸€èµ·åˆä½œï¼Œå¤§å®¶å„å¸å…¶è·æŠŠå°ˆæ¡ˆè“‹èµ·ä¾†ï¼Œè¬›æ±‚å°ˆæ¥­ã€‚"
                },
                4: { // Stability
                    wands: "å°±åƒæ¬é€²æ–°å®¶è¾¦å…¥åæ´¾å°ï¼Œç”Ÿæ´»ç©©å®šäº†ä¸‹ä¾†ï¼Œæ„Ÿåˆ°å®‰ç©©èˆ‡å¿«æ¨‚ã€‚",
                    cups: "å°±åƒæœ‰äººè«‹ä½ å–é£²æ–™ä½ å»èªªä¸è¦ï¼Œå°ç¾ç‹€æ„Ÿåˆ°ç„¡èŠï¼Œæä¸èµ·å‹ã€‚",
                    swords: "å°±åƒç”Ÿç—…äº†éœ€è¦èººåœ¨åºŠä¸Šä¼‘æ¯ï¼Œä»€éº¼éƒ½ä¸æƒ³ç®¡ï¼Œæš«æ™‚ä¼‘æˆ°ã€‚",
                    coins: "å°±åƒç·Šç·ŠæŠ±è‘—å­˜éŒ¢ç­’ä¸è‚¯æ”¾æ‰‹ï¼Œé›–ç„¶æœ‰éŒ¢ä½†æœ‰é»å®ˆè²¡å¥´ï¼Œä¸æ•¢èŠ±éŒ¢ã€‚"
                },
                5: { // Conflict/Loss
                    wands: "å°±åƒä¸€ç¾¤äººåœ¨å¤§äº‚é¬¥ï¼Œæ„è¦‹ä¸åˆåµæˆä¸€åœ˜ï¼Œé›–ç„¶æ¿€çƒˆä½†æ¯”è¼ƒåƒè‰¯æ€§ç«¶çˆ­ã€‚",
                    cups: "å°±åƒæ‰“ç ´äº†æ¯å­çœ‹è‘—ç¢ç‰‡å“­æ³£ï¼Œåªçœ‹åˆ°å¤±å»çš„ï¼Œæ²’çœ‹åˆ°æ—é‚Šé‚„æœ‰æ²’ç ´çš„æ¯å­ã€‚",
                    swords: "å°±åƒè·Ÿäººåµæ¶åµè´äº†ï¼Œä½†å°æ–¹å—å‚·é›¢é–‹äº†ï¼Œè´äº†é¢å­è¼¸äº†è£¡å­ã€‚",
                    coins: "å°±åƒåœ¨å¤§é›ªå¤©èµ°åœ¨æ•™å ‚å¤–ï¼Œæ„Ÿè¦ºè‡ªå·±å¾ˆçª®ã€å¾ˆå­¤å–®ï¼Œéœ€è¦å¹«å¿™å»ä¸æ•¢é–‹å£ã€‚"
                },
                6: { // Harmony/Help
                    wands: "å°±åƒé¨è‘—é¦¬å…‰æ¦®è¿”é„‰ï¼Œå¤§å®¶éƒ½ç‚ºä½ é¼“æŒï¼Œäº«å—å‹åˆ©çš„æ™‚åˆ»ã€‚",
                    cups: "å°±åƒå¶é‡å°æ™‚å€™çš„ç©ä¼´ï¼Œæˆ–æ˜¯ç¿»çœ‹èˆŠç…§ç‰‡ï¼Œå……æ»¿æ‡·èˆŠèˆ‡å–®ç´”çš„å¿«æ¨‚ã€‚",
                    swords: "å°±åƒæ­èˆ¹é›¢é–‹æš´é¢¨åœˆï¼Œé›–ç„¶é‚„æ²’åˆ°å²¸ï¼Œä½†è‡³å°‘å¿ƒæƒ…æ…¢æ…¢å¹³éœä¸‹ä¾†äº†ã€‚",
                    coins: "å°±åƒä½ æ‰‹é ­å¯¬è£•æéŒ¢çµ¦åˆ¥äººï¼Œæˆ–è€…æ˜¯ä½ å‰›å¥½ç¼ºéŒ¢å°±æœ‰äººé›ªä¸­é€ç‚­ã€‚"
                },
                7: { // Challenge/Choices
                    wands: "å°±åƒä¸€å€‹æ‰“åå€‹ï¼Œé›–ç„¶æŒ‘æˆ°å¾ˆå¤šï¼Œä½†ä½ ç«™åœ¨æœ‰åˆ©ä½ç½®ï¼Œå …æŒå°±èƒ½è´ã€‚",
                    cups: "å°±åƒåœ¨é€›ç¶²æ‹çœ‹åˆ°ä»€éº¼éƒ½æƒ³è²·ï¼Œå¹»è±¡å¾ˆå¤šï¼Œä½†ä¸çŸ¥é“å“ªå€‹æ‰æ˜¯çœŸçš„ã€‚",
                    swords: "å°±åƒå·å·æ‘¸æ‘¸æŠŠåˆ¥äººçš„æ±è¥¿æ‹¿èµ°ï¼Œæƒ³ç”¨å°è°æ˜è§£æ±ºå•é¡Œï¼Œæˆ–æ˜¯æœ‰äº‹éš±çã€‚",
                    coins: "å°±åƒè¾²å¤«çœ‹è‘—é‚„æ²’é•·å¤§çš„ä½œç‰©å˜†æ°£ï¼Œåœ¨æ€è€ƒã€Œé€™å€¼å¾—æˆ‘ç¹¼çºŒç­‰å—ï¼Ÿã€ã€‚"
                },
                8: { // Movement/Mastery
                    wands: "å°±åƒå¥½å¹¾æ”¯ç®­åŒæ™‚å°„éä¾†ï¼Œäº‹æƒ…ç™¼ç”Ÿå¾—è¶…å¿«ï¼Œè¨Šæ¯è½Ÿç‚¸ï¼Œç¯€å¥å¾ˆè¶•ã€‚",
                    cups: "å°±åƒæ¯…ç„¶æ±ºç„¶é›¢é–‹ä¸€å€‹é›–ç„¶ç©©å®šä½†ä¸å¿«æ¨‚çš„ç’°å¢ƒï¼Œå»å°‹æ‰¾å¿ƒä¸­çš„è©©èˆ‡é æ–¹ã€‚",
                    swords: "å°±åƒè¢«ç¹©å­ç¶ä½å‹•å½ˆä¸å¾—ï¼Œå…¶å¯¦ç¹©å­å¾ˆé¬†ï¼Œæ˜¯ä½ è‡ªå·±æŠŠè‡ªå·±åš‡å¾—ä¸æ•¢å‹•ã€‚",
                    coins: "å°±åƒå·¥åŒ å°ˆæ³¨åœ°åœ¨é›•åˆ»ä½œå“ï¼Œä¸çœ ä¸ä¼‘ï¼Œé€éæ—¥ç©æœˆç´¯çš„åŠªåŠ›æ›å–æŠ€è¡“ã€‚"
                },
                9: { // Fulfillment/Nightmare
                    wands: "å°±åƒå—å‚·çš„æˆ°å£«åŒ…è‘—ç¹ƒå¸¶é‚„æ˜¯å …æŒç«™åœ¨å‰ç·šï¼Œé›–ç„¶ç´¯ä½†çµ•ä¸æ”¾æ£„ã€‚",
                    cups: "å°±åƒä¸€å€‹äººååœ¨æ»¿æ¡Œç¾é£Ÿå‰ï¼Œè¦ºå¾—ã€Œè€å­/è€å¨˜ç¾åœ¨éå¾—è¶…çˆ½ã€ï¼Œè‡ªæˆ‘æ»¿è¶³ã€‚",
                    swords: "å°±åƒåŠå¤œè¢«æƒ¡å¤¢åš‡é†’ï¼Œååœ¨åºŠä¸ŠæŠ±é ­ç—›å“­ï¼Œç„¦æ…®åˆ°ä¸è¡Œã€‚",
                    coins: "å°±åƒç©¿è‘—è¯éº—çš„è¡£æœåœ¨è‡ªå®¶çš„èŠ±åœ’æ•£æ­¥ï¼Œå–®èº«è²´æ—ï¼Œæœ‰éŒ¢åˆæœ‰é–’ã€‚"
                },
                10: { // Completion
                    wands: "å°±åƒä¸€å€‹äººæŠ±è‘—åæ ¹æœ¨é ­èµ°è·¯ï¼Œç´¯å¾—è¦æ­»é‚„è¦ç¡¬æ’ï¼Œè²¬ä»»å¤ªé‡äº†å•¦ã€‚",
                    cups: "å°±åƒç«¥è©±æ•…äº‹çš„çµå±€ï¼Œä¸€å®¶äººçœ‹è‘—å½©è™¹ï¼Œå¹¸ç¦ç¾æ»¿ï¼Œæƒ…æ„Ÿé€£çµè¶…å¼·ã€‚",
                    swords: "å°±åƒèƒŒä¸Šæ’æ»¿äº†åŠå€’åœ¨åœ°ä¸Šï¼Œæ…˜åˆ°ä¸èƒ½å†æ…˜ï¼Œä½†å¥½æ¶ˆæ¯æ˜¯ç—›è‹¦çµæŸäº†ã€‚",
                    coins: "å°±åƒç¹¼æ‰¿äº†å®¶ç”¢æˆ–æ˜¯å®¶æ—ä¼æ¥­è³ºå¤§éŒ¢ï¼Œç‰©è³ªç”Ÿæ´»å¯Œè¶³ç©©å®šï¼Œé‚„æœ‰å‚³æ‰¿çš„æ„å‘³ã€‚"
                },
                "ä¾è€…": { 
                    wands: "åƒå€‹å……æ»¿å¥½å¥‡çš„å°æ¢éšªå®¶ï¼Œå‰›æ‹¿åˆ°æ–°ç©å…·ï¼Œè¿«ä¸åŠå¾…æƒ³è©¦è©¦çœ‹ã€‚",
                    cups: "åƒå€‹å®³ç¾çš„å°‘å¹´æ‹¿è‘—æƒ…æ›¸ï¼Œå¿ƒè£¡æœ‰è©±æƒ³èªªï¼Œæƒ…æ„Ÿç´°è†©åˆå……æ»¿æƒ³åƒã€‚",
                    swords: "åƒå€‹æ„›æ‰“è½å…«å¦çš„å¹´è¼•äººï¼Œåæ‡‰å¾ˆå¿«ï¼Œä½†ä¹Ÿå¯èƒ½èªªè©±æœ‰é»è¡ã€‚",
                    coins: "åƒå€‹èªçœŸçš„å¯¦ç¿’ç”Ÿï¼Œé›–ç„¶ç¶“é©—ä¸è¶³ï¼Œä½†å¾ˆé¡˜æ„ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢å­¸ã€‚"
                },
                "é¨å£«": { 
                    wands: "åƒå€‹è¡å‹•çš„ç†±è¡€é’å¹´ï¼Œèªªèµ°å°±èµ°ï¼Œé›–ç„¶æœ‰è¡Œå‹•åŠ›ä½†å¯èƒ½ä¸‰åˆ†é˜ç†±åº¦ã€‚",
                    cups: "åƒå€‹æµªæ¼«çš„ç™½é¦¬ç‹å­ï¼Œå¸¶è‘—èŠ±ä¾†æ‰¾ä½ ï¼Œè¿½æ±‚çš„æ˜¯æµªæ¼«èˆ‡æƒ…æ„Ÿçš„æµå‹•ã€‚",
                    swords: "åƒå€‹é£†è»Šæ—ï¼Œç‚ºäº†ç›®æ¨™è¡è¶…å¿«ï¼Œæ€ç·’æ•æ·ä½†å¯èƒ½å¿½ç•¥åˆ¥äººçš„æ„Ÿå—ã€‚",
                    coins: "åƒå€‹é¨è‘—çƒé¾œçš„é¨å£«ï¼Œæ…¢ååä½†æ˜¯è¶…ç©©ï¼Œç­”æ‡‰ä½ çš„äº‹çµ•å°æœƒåšåˆ°ã€‚"
                },
                "çš‡å": { 
                    wands: "åƒå€‹é™½å…‰å¤§å§Šå§Šï¼Œå……æ»¿é­…åŠ›èˆ‡è‡ªä¿¡ï¼Œåœ¨åœ˜é«”ä¸­å¤§å®¶éƒ½å–œæ­¡è½å¥¹çš„ã€‚",
                    cups: "åƒå€‹æº«æŸ”çš„åª½åª½æˆ–å‚¾è½è€…ï¼Œç›´è¦ºå¾ˆå¼·ï¼Œèƒ½æ„Ÿå—åˆ°ä½ æ²’èªªå‡ºå£çš„æƒ…ç·’ã€‚",
                    swords: "åƒå€‹ç²¾æ˜å¹¹ç·´çš„å¥³ä¸»ç®¡ï¼Œèªªè©±ç›´æ¥ä¸æ‹å½æŠ¹è§’ï¼Œé‡è¦–é‚è¼¯èˆ‡ç•Œç·šã€‚",
                    coins: "åƒå€‹å¾ˆæœƒç…§é¡§äººçš„å®¶åº­ä¸»å©¦æˆ–è€é—†å¨˜ï¼Œå‹™å¯¦åˆæº«æš–ï¼ŒæœƒæŠŠä½ é¤µå¾—é£½é£½çš„ã€‚"
                },
                "åœ‹ç‹": { 
                    wands: "åƒå€‹å‰µæ¥­å®¶æˆ–é ˜è¢–ï¼Œæœ‰é è¦‹åˆæœ‰é­…åŠ›ï¼Œå¸¶é ˜å¤§å®¶å¾€ç›®æ¨™è¡åˆºã€‚",
                    cups: "åƒå€‹æˆç†Ÿçš„å¥½çˆ¸çˆ¸ï¼Œæƒ…ç·’ç©©å®šï¼Œé›–ç„¶è©±ä¸å¤šä½†å¾ˆé—œå¿ƒå®¶äººã€‚",
                    swords: "åƒå€‹æ¬Šå¨çš„æ³•å®˜æˆ–æ•™æˆï¼Œéå¸¸ç†æ€§å°ˆæ¥­ï¼Œä½†ä¹Ÿå¯èƒ½è®“äººè¦ºå¾—æœ‰é»å†·å†°å†°ã€‚",
                    coins: "åƒå€‹å¤§ä¼æ¥­å®¶ï¼Œæ‰‹æ¡è³‡æºï¼Œçœ‹é‡çš„æ˜¯å¯¦éš›çš„æˆæœèˆ‡é•·é çš„åˆ©ç›Šã€‚"
                }
            };

            // é€†ä½æè¿° (åŠ ä¸Šç°¡å–®çš„è½‰æŠ˜)
            const reversedScenarios = {
                1: { // Ace Rev
                    wands: "å°±åƒç«æŸ´æ¿•äº†é»ä¸è‘—ï¼Œæƒ³åšä»€éº¼å»ä¸€ç›´æä¸èµ·å‹ï¼Œæˆ–æ˜¯æ™‚æ©Ÿæœªåˆ°ã€‚",
                    cups: "å°±åƒæ»¿å‡ºä¾†çš„æ°´ç‘äº†ä¸€åœ°ï¼Œæƒ…æ„Ÿå¯èƒ½æœ‰é»éåº¦æ°¾æ¿«ï¼Œæˆ–æ˜¯æ„Ÿè¦ºç©ºè™›ã€‚",
                    swords: "å°±åƒç­†è¨˜æœ¬è¢«æ’•ç ´ï¼Œé»å­é›–å¥½ä½†åŸ·è¡Œä¸å‡ºä¾†ï¼Œæˆ–æ˜¯è…¦è¢‹æ‰“çµã€‚",
                    coins: "å°±åƒéŒ¢åŒ…ç ´äº†å€‹æ´ï¼ŒéŒ¢å‰›é€²ä¾†åˆèŠ±å‡ºå»ï¼Œæˆ–æ˜¯æŠ•è³‡æ™‚æ©Ÿä¸å°ã€‚"
                },
                "default": "é€™å¼µç‰Œé€†ä½æ™‚ï¼Œä¸Šè¿°çš„èƒ½é‡æœƒè®Šå¾—ä¸ç©©å®šã€‚å¯èƒ½è¡¨ç¾éåº¦ï¼ˆä¾‹å¦‚å¤ªè¡å‹•ï¼‰ï¼Œæˆ–æ˜¯è¡¨ç¾ä¸è¶³ï¼ˆä¾‹å¦‚æ‹–å»¶ã€åœæ»¯ï¼‰ã€‚"
            };

            const upText = uprightScenarios[number] ? uprightScenarios[number][suitKey] : "æ­£ä½èƒ½é‡é¡¯ç¾ã€‚";
            
            // è™•ç†é€†ä½é‚è¼¯
            let revText = "";
            if (reversedScenarios[number] && reversedScenarios[number][suitKey]) {
                revText = reversedScenarios[number][suitKey];
            } else if (typeof number === 'string') { // å®®å»·ç‰Œé€†ä½é€šç”¨
                 if (number === "ä¾è€…") revText = "åƒå€‹ä¸å—æ§çš„å°å±å­©ï¼Œå¯èƒ½æœƒå‚³é”éŒ¯èª¤çš„æ¶ˆæ¯ï¼Œæˆ–æ˜¯ä¸‰åˆ†é˜ç†±åº¦ã€‚";
                 else if (number === "é¨å£«") revText = "å¤ªéé­¯è½æˆ–æ˜¯å®Œå…¨ä¸å‹•ï¼Œè¡Œå‹•åŠ›å‡ºç¾äº†å•é¡Œã€‚";
                 else if (number === "çš‡å") revText = "æƒ…ç·’å‹’ç´¢ï¼Œæˆ–æ˜¯å«‰å¦’å¿ƒå¤ªå¼·ï¼Œè®“äººæ„Ÿåˆ°çª’æ¯ã€‚";
                 else if (number === "åœ‹ç‹") revText = "å¤ªéå›ºåŸ·å°ˆåˆ¶ï¼Œè½ä¸é€²åˆ¥äººçš„è©±ï¼Œæˆ–æ˜¯æ¿«ç”¨æ¬ŠåŠ›ã€‚";
            } else {
                // æ•¸å­—ç‰Œé€†ä½é€šç”¨è£œå……
                if (number === 5) revText = "é›–ç„¶é‚„åœ¨æ··äº‚ä¸­ï¼Œä½†æœ€å£çš„ç‹€æ³å·²ç¶“éå»äº†ï¼Œé–‹å§‹å­¸æœƒæ¥å—ã€‚";
                else if (number === 10) revText = "å£“åŠ›å¤§åˆ°çˆ†è¡¨ï¼Œæˆ–è€…æ˜¯è©²çµæŸçš„å»é‚„åœ¨æ‹–æ³¥å¸¶æ°´ã€‚";
                else revText = `åŸæœ¬${s.name}é †åˆ©çš„èƒ½é‡å—é˜»ï¼Œå¯èƒ½è¨ˆç•«å»¶é²ï¼Œæˆ–æ˜¯ä½ å¿ƒæ…‹ä¸Šé‚„æ²’æº–å‚™å¥½ã€‚`;
            }

            // Tag Logic for Minors
            // Default tags mapping
            let tag = 'action';
            if(suitKey === 'cups') tag = 'social';
            if(suitKey === 'swords') tag = 'conflict';
            if(suitKey === 'coins') tag = 'money';
            
            // Override based on number
            if(number === 1) tag = 'new';
            if(number === 4) tag = 'stable'; // or wait
            if(number === 5) tag = 'conflict';
            if(number === 6) tag = 'social'; // or stable
            if(number === 7) tag = 'caution'; // or conflict
            if(number === 8 && suitKey === 'swords') tag = 'wait';
            if(number === 8 && suitKey === 'wands') tag = 'action';
            if(number === 9) tag = 'wait'; // or stable
            if(number === 10) tag = 'stable'; // or caution
            if(number === 'ä¾è€…') tag = 'new';
            
            // Specific overrides
            if(suitKey === 'swords' && (number === 3 || number === 9 || number === 10)) tag = 'conflict';
            if(suitKey === 'coins' && number === 5) tag = 'caution';

            return { up: upText, rev: revText, tag: tag };
        };

        // Generate Minor Arcana Array
        let MINORS = [];
        const SUITS_KEYS = ["wands", "cups", "swords", "coins"];
        const COURTS = ["ä¾è€…", "é¨å£«", "çš‡å", "åœ‹ç‹"];
        const NUMBERS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

        SUITS_KEYS.forEach(suitKey => {
            // Number Cards
            NUMBERS.forEach(num => {
                const meaning = getMinorMeaning(suitKey, num);
                const suitName = suitKey === 'wands' ? 'æ¬Šæ–' : suitKey === 'cups' ? 'è–æ¯' : suitKey === 'swords' ? 'å¯¶åŠ' : 'æ˜Ÿå¹£';
                const finalName = `${suitName} ${num === 1 ? 'Ace' : num}`;
                MINORS.push(createCard(`min_${suitKey}_${num}`, finalName, suitKey, num, meaning.tag, meaning.up, meaning.rev));
            });

            // Court Cards
            COURTS.forEach(rank => {
                const meaning = getMinorMeaning(suitKey, rank);
                const suitName = suitKey === 'wands' ? 'æ¬Šæ–' : suitKey === 'cups' ? 'è–æ¯' : suitKey === 'swords' ? 'å¯¶åŠ' : 'æ˜Ÿå¹£';
                const finalName = `${suitName}${rank}`;
                MINORS.push(createCard(`min_${suitKey}_${rank}`, finalName, suitKey, rank, meaning.tag, meaning.up, meaning.rev));
            });
        });

        const TAROT_DECK = [...MAJORS, ...MINORS];

        // 3. Smart Advice Library
        const ADVICE_LIBRARY = {
            "love": {
                "new": { up: "é©åˆï¼šä¸»å‹•ç´„å°æ–¹å»ä¸€å€‹æ–°é®®çš„åœ°æ–¹ï¼Œæˆ–è£½é€ ä¸€é»å°é©šå–œã€‚ä¸é©åˆï¼šå¤ªéè¢«å‹•ç­‰å¾…ï¼Œæˆ–æ˜¯ä¸€ä¸‹å­çµ¦å°æ–¹å¤ªå¤§çš„æ‰¿è«¾ã€‚", rev: "é©åˆï¼šå…ˆç·©ä¸€ç·©ï¼Œç¢ºå®šè‡ªå·±æº–å‚™å¥½äº†å†å‡ºç™¼ã€‚ä¸é©åˆï¼šå› ç‚ºå¯‚å¯è€Œéš¨ä¾¿é–‹å§‹ä¸€æ®µé—œä¿‚ã€‚" },
                "action": { up: "é©åˆï¼šå¤§è†½å‘Šç™½æˆ–ç›´æ¥è¡¨é”ä½ çš„æ„Ÿå—ï¼Œæ„›è¦èªªå‡ºä¾†ã€‚ä¸é©åˆï¼šçŒœä¾†çŒœå»ï¼Œæˆ–æ˜¯åœ¨å¿ƒè£¡æ¼”å°åŠ‡å ´ã€‚", rev: "é©åˆï¼šæ§åˆ¶ä¸€ä¸‹ä½ çš„ç†±æƒ…ï¼Œä¸è¦åš‡åˆ°å°æ–¹ã€‚ä¸é©åˆï¼šå› ç‚ºè¡å‹•è€Œèªªå‡ºå‚·äººçš„è©±ã€‚" },
                "wait": { up: "é©åˆï¼šéœéœé™ªä¼´ï¼Œæˆ–çµ¦å½¼æ­¤ä¸€é»ç¨è™•çš„ç©ºé–“ã€‚ä¸é©åˆï¼šæ€¥è‘—è¦ç­”æ¡ˆï¼Œæˆ–æ˜¯ä¸€ç›´è¿½å•ã€Œæˆ‘å€‘ç¾åœ¨æ˜¯ä»€éº¼é—œä¿‚ã€ã€‚", rev: "é©åˆï¼šèµ°å‡ºå»å¤šèªè­˜äººï¼Œä¸è¦å°é–‰è‡ªå·±ã€‚ä¸é©åˆï¼šä¸€ç›´æ´»åœ¨éå»çš„å›æ†¶è£¡èµ°ä¸å‡ºä¾†ã€‚" },
                "stable": { up: "é©åˆï¼šäº«å—å¹³æ·¡çš„å¹¸ç¦ï¼Œä¸€èµ·ç…®é£¯æˆ–çª©åœ¨å®¶çœ‹é›»å½±ã€‚ä¸é©åˆï¼šæ²’äº‹æ‰¾äº‹åšï¼Œæˆ–æ˜¯ç‚ºäº†è¿½æ±‚åˆºæ¿€è€Œç ´å£ç¾ç‹€ã€‚", rev: "é©åˆï¼šæ‰¾æ™‚é–“å¥½å¥½æºé€šï¼Œè§£æ±ºé‚£äº›ç´¯ç©å·²ä¹…çš„å°å•é¡Œã€‚ä¸é©åˆï¼šå¿½è¦–é—œä¿‚ä¸­çš„è£‚ç—•å‡è£æ²’äº‹ã€‚" },
                "conflict": { up: "é©åˆï¼šç†æ€§æºé€šï¼ŒæŠŠè©±è¬›é–‹ï¼Œä¸è¦å†·æˆ°ã€‚ä¸é©åˆï¼šæƒ…ç·’åŒ–åœ°çˆ­åµï¼Œæˆ–æ˜¯å …æŒè‡ªå·±ä¸€å®šæ˜¯å°çš„ã€‚", rev: "é©åˆï¼šå…ˆå†·éœä¸€å€‹æ™šä¸Šï¼Œä¸è¦åœ¨æ°£é ­ä¸Šåšæ±ºå®šã€‚ä¸é©åˆï¼šç¿»èˆŠå¸³ï¼Œæˆ–æ˜¯ç”¨è¨€èªæ”»æ“Šå°æ–¹çš„ç—›è™•ã€‚" },
                "social": { up: "é©åˆï¼šå¸¶å¦ä¸€åŠå»è¦‹æœ‹å‹ï¼Œæˆ–æ˜¯åƒåŠ é›™äººèšæœƒã€‚ä¸é©åˆï¼šä½”æœ‰æ…¾å¤ªå¼·ï¼ŒæŠŠå°æ–¹ç¶åœ¨èº«é‚Šã€‚", rev: "é©åˆï¼šå¤šé—œæ³¨ä½ å€‘å…©å€‹äººçš„ä¸–ç•Œï¼Œæ¸›å°‘å¤–ç•Œå¹²æ“¾ã€‚ä¸é©åˆï¼šå› ç‚ºæœ‹å‹çš„é–’è¨€é–’èªè€Œæ‡·ç–‘å°æ–¹ã€‚" },
                "money": { up: "é©åˆï¼šä¸€èµ·è¦åŠƒæœªä¾†çš„è²¡å‹™ç›®æ¨™ï¼Œæˆ–è¨è«–é‡‘éŒ¢è§€ã€‚ä¸é©åˆï¼šç‚ºäº†èª°è©²ä»˜éŒ¢é€™ç¨®å°äº‹æ–¤æ–¤è¨ˆè¼ƒã€‚", rev: "é©åˆï¼šåœ¨ç‰©è³ªä¸Šäº’ç›¸é«”è«’ã€‚ä¸é©åˆï¼šç”¨é‡‘éŒ¢ä¾†è¡¡é‡å°æ–¹çš„æ„›ã€‚" },
                "caution": { up: "é©åˆï¼šå¤šæ„›è‡ªå·±ä¸€é»ï¼Œè¨­ç«‹å¥åº·çš„ç•Œç·šã€‚ä¸é©åˆï¼šéåº¦ä»˜å‡ºåˆ°å¤±å»è‡ªæˆ‘ï¼Œæˆ–å¿½è¦–è­¦è¨Šã€‚", rev: "é©åˆï¼šèª å¯¦é¢å°çœŸç›¸ï¼Œå³ä½¿é‚£å¯èƒ½æœ‰é»ç—›ã€‚ä¸é©åˆï¼šè‡ªæ¬ºæ¬ºäººï¼Œæˆ–æ˜¯æ˜çŸ¥ä¸é©åˆé‚„ç¡¬æ’ã€‚" }
            },
            "career": {
                "new": { up: "é©åˆï¼šå•Ÿå‹•æ–°è¨ˆç•«ã€å­¸ç¿’æ–°æŠ€èƒ½æˆ–æŠ•éå±¥æ­·ã€‚ä¸é©åˆï¼šå¢¨å®ˆæˆè¦ï¼Œæ‹’çµ•æ¥è§¸æ–°äº‹ç‰©ã€‚", rev: "é©åˆï¼šé‡æ–°è©•ä¼°è¨ˆç•«çš„å¯è¡Œæ€§ï¼ŒæŠŠç´°ç¯€æƒ³æ¸…æ¥šã€‚ä¸é©åˆï¼šé‚„æ²’æº–å‚™å¥½å°±è²¿ç„¶è¾­è·æˆ–å‰µæ¥­ã€‚" },
                "action": { up: "é©åˆï¼šç©æ¥µçˆ­å–è¡¨ç¾æ©Ÿæœƒï¼ŒåŠ ç­è¡åˆºä¸€ä¸‹æœƒæœ‰å¥½æˆæœã€‚ä¸é©åˆï¼šæ‹–å»¶ç—‡ç™¼ä½œï¼Œæˆ–æ˜¯åªèªªä¸åšã€‚", rev: "é©åˆï¼šæ”¾æ…¢è…³æ­¥ï¼Œæª¢æŸ¥æœ‰æ²’æœ‰éºæ¼çš„ç´°ç¯€ã€‚ä¸é©åˆï¼šå› ç‚ºå¿ƒæ€¥è€ŒçŠ¯ä¸‹ç²—å¿ƒçš„éŒ¯èª¤ã€‚" },
                "wait": { up: "é©åˆï¼šé€²ä¿®å……é›»ï¼Œæˆ–æ˜¯å…ˆè§€å¯Ÿå±€å‹¢å†è¡Œå‹•ã€‚ä¸é©åˆï¼šå¼·å‡ºé ­ï¼Œæˆ–æ˜¯åœ¨æ™‚æ©Ÿæœªåˆ°æ™‚ç¡¬è¦æ¨å‹•é€²åº¦ã€‚", rev: "é©åˆï¼šæ‰“ç ´åƒµå±€ï¼Œå˜—è©¦ç”¨ä¸åŒçš„æ–¹æ³•è§£æ±ºå•é¡Œã€‚ä¸é©åˆï¼šä¸€ç›´å¡åœ¨åŸåœ°æŠ±æ€¨ç’°å¢ƒã€‚" },
                "stable": { up: "é©åˆï¼šæŠŠæ‰‹é‚Šçš„å·¥ä½œåšå¥½ï¼Œå»ºç«‹æ¨™æº–ä½œæ¥­æµç¨‹(SOP)ã€‚ä¸é©åˆï¼šéš¨æ„æ›´å‹•å·²ç¶“é‹ä½œè‰¯å¥½çš„è¦å‰‡ã€‚", rev: "é©åˆï¼šæª¢è¦–ç¾æœ‰çš„åˆ¶åº¦æ˜¯å¦æœ‰åƒµåŒ–çš„åœ°æ–¹ã€‚ä¸é©åˆï¼šå›ºåŸ·å·±è¦‹ï¼Œä¸è½åŒäº‹çš„å»ºè­°ã€‚" },
                "conflict": { up: "é©åˆï¼šå°±äº‹è«–äº‹ï¼Œç”¨æ•¸æ“šå’Œé‚è¼¯ä¾†èªªæœåˆ¥äººã€‚ä¸é©åˆï¼šæŠŠå·¥ä½œä¸Šçš„æ­§è¦‹å¸¶å…¥ç§äººæƒ…ç·’ã€‚", rev: "é©åˆï¼šæš«æ™‚é¿é–‹é‹’èŠ’ï¼Œä¸è¦æ­£é¢è¡çªã€‚ä¸é©åˆï¼šåœ¨èƒŒå¾Œèªªäººå£è©±æˆ–æå°åœ˜é«”ã€‚" },
                "social": { up: "é©åˆï¼šæ‹“å±•äººè„ˆï¼ŒåƒåŠ æ¥­ç•Œäº¤æµæ´»å‹•ã€‚ä¸é©åˆï¼šå–®æ‰“ç¨é¬¥ï¼Œå¿½ç•¥äº†åœ˜éšŠåˆä½œçš„é‡è¦ã€‚", rev: "é©åˆï¼šå°ˆæ³¨åœ¨è‡ªå·±çš„å°ˆæ¥­ä¸Šï¼Œæ¸›å°‘ç„¡æ•ˆç¤¾äº¤ã€‚ä¸é©åˆï¼šå› ç‚ºäººæƒ…å£“åŠ›è€Œæ¥ä¸‹ä¸æƒ³åšçš„å·¥ä½œã€‚" },
                "money": { up: "é©åˆï¼šçˆ­å–åŠ è–ªï¼Œæˆ–æ˜¯æŠ•è³‡è‡ªå·±æå‡èº«åƒ¹ã€‚ä¸é©åˆï¼šå¤ªéè¨ˆè¼ƒçœ¼å‰çš„è …é ­å°åˆ©ã€‚", rev: "é©åˆï¼šä¿å®ˆç†è²¡ï¼Œçœ‹ç·Šé ç®—ã€‚ä¸é©åˆï¼šé€²è¡Œé«˜é¢¨éšªçš„æŠ•è³‡æˆ–å€Ÿè²¸ã€‚" },
                "caution": { up: "é©åˆï¼šä»”ç´°æª¢æŸ¥åˆç´„ï¼Œä¿æŒè­¦è¦ºã€‚ä¸é©åˆï¼šè¼•ä¿¡å£é ­æ‰¿è«¾ï¼Œæˆ–æ˜¯ä¾¿å®œè¡Œäº‹ã€‚", rev: "é©åˆï¼šæ‰¿èªéŒ¯èª¤ä¸¦è¨­ç«‹åœæé»ã€‚ä¸é©åˆï¼šç‚ºäº†é¢å­è€Œç¡¬æ’ä¸€å€‹å¤±æ•—çš„å°ˆæ¡ˆã€‚" }
            },
            // Fallback for other topics (money, study, etc. can map to generic)
            "default": {
                "new": { up: "é©åˆï¼šå˜—è©¦ä»¥å‰æ²’åšéçš„äº‹ï¼Œè¸å‡ºèˆ’é©åœˆã€‚ä¸é©åˆï¼šæƒ³å¤ªå¤šè€Œä¸æ•¢è¡Œå‹•ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šå†å¤šåšä¸€é»åŠŸèª²ï¼Œé™ä½é¢¨éšªã€‚ä¸é©åˆï¼šç›²ç›®è·Ÿé¢¨ã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "action": { up: "é©åˆï¼šåè€Œè¨€ä¸å¦‚èµ·è€Œè¡Œï¼Œç¾åœ¨å°±æ˜¯æœ€å¥½çš„æ™‚æ©Ÿã€‚ä¸é©åˆï¼šçŒ¶è±«ä¸æ±ºæµªè²»æ™‚é–“ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šä¸‰æ€è€Œå¾Œè¡Œï¼Œæ¬²é€Ÿå‰‡ä¸é”ã€‚ä¸é©åˆï¼šè¡å‹•è¡Œäº‹ã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "wait": { up: "é©åˆï¼šä¼‘æ¯æ˜¯ç‚ºäº†èµ°æ›´é•·é çš„è·¯ï¼Œå¤šè½å¤šçœ‹ã€‚ä¸é©åˆï¼šç„¦æ…®åœ°é€¼è‡ªå·±è¦æœ‰ç”¢å‡ºã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šå‹•èµ·ä¾†ï¼Œä¸è¦è®“è‡ªå·±ç”Ÿé½äº†ã€‚ä¸é©åˆï¼šä¸€ç›´æ‰¾è—‰å£æ‹–å»¶ã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "stable": { up: "é©åˆï¼šç¶­æŒç¾ç‹€ï¼Œç©©ç´®ç©©æ‰“ã€‚ä¸é©åˆï¼šå¥½é«˜é¨–é ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šå½ˆæ€§èª¿æ•´ï¼Œä¸è¦å¤ªæ­»è…¦ç­‹ã€‚ä¸é©åˆï¼šä¸çŸ¥è®Šé€šã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "conflict": { up: "é©åˆï¼šé¢å°å•é¡Œï¼Œè§£æ±ºæ ¸å¿ƒçŸ›ç›¾ã€‚ä¸é©åˆï¼šé€ƒé¿ç¾å¯¦ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šé€€ä¸€æ­¥æµ·é—Šå¤©ç©ºã€‚ä¸é©åˆï¼šç¡¬ç¢°ç¡¬ã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "social": { up: "é©åˆï¼šå°‹æ±‚ä»–äººçš„å¹«åŠ©æˆ–åˆä½œã€‚ä¸é©åˆï¼šå­¤è»å¥®æˆ°ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šæŠŠé‡å¿ƒæ”¾å›è‡ªå·±èº«ä¸Šã€‚ä¸é©åˆï¼šéåº¦åœ¨æ„åˆ¥äººçš„çœ¼å…‰ã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "money": { up: "é©åˆï¼šç†æ€§è¦åŠƒè³‡æºã€‚ä¸é©åˆï¼šè¡å‹•æ¶ˆè²»ã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šä¿å®ˆç‚ºä¸Šã€‚ä¸é©åˆï¼šè²ªå°ä¾¿å®œã€‚(åƒ…ä¾›åƒè€ƒ)" },
                "caution": { up: "é©åˆï¼šè¬¹æ…è¡Œäº‹ï¼Œå®‰å…¨ç¬¬ä¸€ã€‚ä¸é©åˆï¼šå†’éšªè³­ä¸€æŠŠã€‚(åƒ…ä¾›åƒè€ƒ)", rev: "é©åˆï¼šçœ‹æ¸…çœŸç›¸ï¼Œæ¥å—ç¾å¯¦ã€‚ä¸é©åˆï¼šè‡ªæˆ‘æ¬ºé¨™ã€‚(åƒ…ä¾›åƒè€ƒ)" }
            }
        };

        /**
         * 2. App Logic
         */
        
        const SPREADS = {
            "single": { name: "å–®å¼µæŒ‡å¼•", positions: ["ç•¶ä¸‹æŒ‡å¼•"] },
            "time": { name: "æ™‚é–“ä¹‹æµ", positions: ["éå»çš„ç¶“é©—", "ç¾åœ¨çš„ç‹€æ³", "æœªä¾†çš„è¶¨å‹¢"] },
            "soa": { name: "ç¾æ³åˆ†æ", positions: ["ç›®å‰è™•å¢ƒ", "é‡åˆ°çš„éšœç¤™", "å»ºè­°çš„è¡Œå‹•"] }
        };

        class TarotApp {
            constructor() {
                this.deck = [...TAROT_DECK];
                this.boardEl = document.getElementById('board');
                this.resultsEl = document.getElementById('results');
                this.drawBtn = document.getElementById('drawBtn');
                this.resetBtn = document.getElementById('resetBtn');
                
                this.drawBtn.addEventListener('click', () => this.startReading());
                this.resetBtn.addEventListener('click', () => this.resetBoard());
                
                this.isReading = false;
            }

            resetBoard() {
                this.boardEl.innerHTML = '';
                this.resultsEl.innerHTML = '';
                this.resultsEl.style.display = 'none';
                this.isReading = false;
                this.drawBtn.disabled = false;
                this.drawBtn.textContent = "æ´—ç‰Œä¸¦æŠ½ç‰Œ";
            }

            shuffle() {
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }
            }

            async startReading() {
                if (this.isReading) return;
                const question = document.getElementById('questionInput').value.trim();
                if (!question) {
                    alert("è«‹å…ˆè¼¸å…¥ä½ æƒ³å•çš„å•é¡Œï¼Œå¿ƒèª å‰‡éˆï¼");
                    return;
                }

                this.isReading = true;
                this.drawBtn.disabled = true;
                this.drawBtn.textContent = "æ´—ç‰Œä¸­...";
                this.resetBoard();

                // Simulate shuffling delay
                await new Promise(r => setTimeout(r, 800));
                this.shuffle();

                const spreadKey = document.querySelector('input[name="spread"]:checked').value;
                const spread = SPREADS[spreadKey];
                const count = spread.positions.length;
                
                const drawnCards = [];
                for(let i=0; i<count; i++) {
                    const card = this.deck[i];
                    const isUpright = Math.random() > 0.5;
                    drawnCards.push({ card, isUpright, position: spread.positions[i] });
                }

                this.drawBtn.textContent = "æŠ½ç‰Œå®Œæˆ";
                this.renderCards(drawnCards);
                this.generateInterpretations(drawnCards);
            }

            renderCards(drawnCards) {
                this.boardEl.innerHTML = '';
                drawnCards.forEach((item, index) => {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'card-container';
                    cardEl.dataset.orientation = item.isUpright ? 'upright' : 'reversed';
                    
                    // Delay for sequential animation
                    cardEl.style.animationDelay = `${index * 0.2}s`;

                    const orientationText = item.isUpright ? "æ­£ä½" : "é€†ä½";
                    
                    cardEl.innerHTML = `
                        <div class="position-label">${item.position}</div>
                        <div class="card-inner">
                            <div class="card-back">ğŸ”®</div>
                            <div class="card-front">
                                <div class="card-content">
                                    <div class="card-img-placeholder">${item.card.arcana === 'major' ? 'ğŸŒŸ' : 'âš”ï¸'}</div>
                                    <div class="card-title">${item.card.name}</div>
                                    <div class="card-status">(${orientationText})</div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    this.boardEl.appendChild(cardEl);

                    // Click to flip (or auto flip after short delay)
                    setTimeout(() => {
                        cardEl.classList.add('flipped');
                    }, 500 + (index * 500));
                });
            }

            // æ–°å¢ï¼šæ™ºæ…§å»ºè­°ç”Ÿæˆå™¨
            getSmartAdvice(tag, topic, isUpright) {
                // Determine category based on topic
                let category = 'default';
                if (topic === 'love' || topic === 'relation') category = 'love';
                if (topic === 'career' || topic === 'study' || topic === 'money') category = 'career';

                // Get base advice object
                const adviceObj = ADVICE_LIBRARY[category][tag] || ADVICE_LIBRARY['default'][tag];
                
                // Get string
                let text = isUpright ? adviceObj.up : adviceObj.rev;
                
                // Add Disclaimer
                return text + " (åƒ…ä¾›åƒè€ƒ)";
            }

            generateInterpretations(drawnCards) {
                const topic = document.getElementById('topicSelect').value;
                const topicLabels = {
                    "general": "ç¶œåˆé‹å‹¢", "love": "æ„›æƒ…", "career": "å·¥ä½œ", 
                    "money": "é‡‘éŒ¢", "study": "å­¸æ¥­", "relation": "äººéš›", "growth": "å¿ƒéˆ"
                };
                
                let html = `<h3>ğŸ”® ${topicLabels[topic]}è§£è®€çµæœ</h3>`;

                drawnCards.forEach((item, index) => {
                    const card = item.card;
                    const orient = item.isUpright ? "æ­£ä½" : "é€†ä½";
                    const summary = item.isUpright ? card.uprightSummary : card.reversedSummary;
                    
                    // Generate specific advice
                    const advice = this.getSmartAdvice(card.tag, topic, item.isUpright);

                    // Build HTML
                    let text = "";
                    text += `<strong>ã€${item.position}ã€‘æŠ½åˆ°äº†ã€Œ${card.name} (${orient})ã€ï¼š</strong><br>`;
                    text += `${summary}`;
                    text += `<br><br><strong>ğŸ’¡ ç”Ÿæ´»åŒ–å»ºè­°ï¼š</strong><br>${advice}`;

                    html += `
                        <div class="reading-item" style="animation-delay: ${2 + index * 0.5}s">
                            <div class="reading-header">
                                ${index+1}. ${item.position} â€” ${card.name} (${orient})
                            </div>
                            <div class="reading-text">${text}</div>
                        </div>
                    `;
                });

                // Show results after cards are flipped
                setTimeout(() => {
                    this.resultsEl.innerHTML = html;
                    this.resultsEl.style.display = 'block';
                    this.resultsEl.scrollIntoView({ behavior: 'smooth' });
                    this.isReading = false;
                    this.drawBtn.disabled = false;
                }, 1000 + (drawnCards.length * 500));
            }
        }

        // Initialize
        const app = new TarotApp();

    </script>
</body>
</html>
